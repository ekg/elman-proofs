digraph "Sorry Resolution Strategy" {
  rankdir=TB;
  node [fontname="Helvetica", fontsize=10];
  edge [fontname="Helvetica", fontsize=8];
  compound=true;

  // Track 1: Broken Theorems
  subgraph cluster_track1 {
    label="Track 1: Broken Theorems (~10 sorries)";
    style=rounded;
    color=red;
    bgcolor="#fff0f0";

    "1-analyze" [label="Analyze broken\ntheorem root causes", shape=box, style=filled, fillcolor=lightyellow];
    "1-1" [label="1.1: Catalog broken\nstatements + WHY", shape=box];
    "1-2" [label="1.2: Document what\nthey reveal about E88", shape=box];
    "1-3" [label="1.3: Fix statements\nwith correct constraints", shape=box];

    "1-analyze" -> "1-1" -> "1-2" -> "1-3";
  }

  // Track 2: Continuity
  subgraph cluster_track2 {
    label="Track 2: Continuity Proofs (~8 sorries)";
    style=rounded;
    color=blue;
    bgcolor="#f0f0ff";

    "2-analyze" [label="Find Mathlib\ncontinuity API", shape=box, style=filled, fillcolor=lightyellow];
    "2-1" [label="2.1: Matrix/linear\ncontinuity lemmas", shape=box];
    "2-2" [label="2.2: Prove\nlinear_rnn_continuous", shape=box];
    "2-3" [label="2.3: Fix all\ncontinuity sorries", shape=box];

    "2-analyze" -> "2-1" -> "2-2" -> "2-3";
  }

  // Track 3: Numerical
  subgraph cluster_track3 {
    label="Track 3: Numerical Bounds (~5 sorries)";
    style=rounded;
    color=green;
    bgcolor="#f0fff0";

    "3-analyze" [label="Prove tanh/exp\nbounds strategy", shape=box, style=filled, fillcolor=lightyellow];
    "3-1" [label="3.1: Prove\ntanh(1.1) > 0.8", shape=box];
    "3-2" [label="3.2: Complete\nNumericalBounds.lean", shape=box];
    "3-3" [label="3.3: Fix numerical\nsorries", shape=box];

    "3-analyze" -> "3-1" -> "3-2" -> "3-3";
  }

  // Final
  "final" [label="FINAL:\n0 sorries in\nExpressivity/", shape=doubleoctagon, style=filled, fillcolor=lightgreen];

  "1-3" -> "final";
  "2-3" -> "final";
  "3-3" -> "final";
}
